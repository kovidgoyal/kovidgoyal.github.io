<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="Custom kittens" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sw.kovidgoyal.net/kitty/kittens/custom.html" />
  <meta property="og:description" content="You can easily create your own kittens to extend kitty. They are just terminal programs written in Python. When launching a kitten, kitty will open an overlay window over the current window and opt..." />
  <link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="broadcast" href="../broadcast/" /><link rel="prev" title="Hyperlinked grep" href="../hyperlinked_grep/" />

    <link rel="shortcut icon" href="../../_static/kitty.svg"/><meta name="generator" content="sphinx-4.0.3, furo 2021.07.05.beta38"/>
        <title>Custom kittens - kitty</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css" />
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css">
  
      <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20736318-2']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../"><div class="brand">kitty</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/kitty.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search/">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../quickstart/">Quickstart</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../binary/">Install kitty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../build/">Build from source</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../overview/">Overview</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../conf/">Configure kitty</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../actions/">Mappable actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../layouts/">Arrange windows</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../kittens_intro/">Extend kitty</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../icat/">icat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../diff/">kitty-diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../unicode-input/">Unicode input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hints/">Hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../remote_file/">Remote files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hyperlinked_grep/">Hyperlinked grep</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Custom kittens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../broadcast/">broadcast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clipboard/">clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../panel/">Draw a GPU accelerated dock panel on your desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query_terminal/">Query terminal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../remote-control/">Control kitty from scripts</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../rc_protocol/">The kitty remote control protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../launch/">Launching new tabs/windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../open_actions/">Scripting the mouse click</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../marks/">Mark text on screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/">Support kitty development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance/">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations/">Integrations with other tools</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol-extensions/">Terminal protocol extensions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../underlines/">Colored and styled underlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../graphics-protocol/">The terminal graphics protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../keyboard-protocol/">Comprehensive keyboard handling in terminals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../desktop-notifications/">Desktop notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../unscroll/">Unscrolling the screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clipboard/">Pasting to clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../color-stack/">Saving and restoring colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deccara/">Setting text styles/colors in arbitrary regions of the screen</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="custom-kittens">
<h1>Custom kittens<a class="headerlink" href="#custom-kittens" title="Permalink to this headline">¶</a></h1>
<p>You can easily create your own kittens to extend kitty. They are just
terminal programs written in Python. When launching a kitten, kitty will
open an overlay window over the current window and optionally pass the
contents of the current window/scrollback to the kitten over its <code class="file docutils literal notranslate"><span class="pre">STDIN</span></code>.
The kitten can then perform whatever actions it likes, just as a normal
terminal program. After execution of the kitten is complete, it has access
to the running kitty instance so it can perform arbitrary actions
such as closing windows, pasting text, etc.</p>
<p>Let’s see a simple example of creating a kitten. It will ask the user for some
input and paste it into the terminal window.</p>
<p>Create a file in the kitty config folder, <code class="file docutils literal notranslate"><span class="pre">~/.config/kitty/mykitten.py</span></code>
(you might need to adjust the path to wherever the kitty config folder is on
your machine).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">kitty.boss</span> <span class="kn">import</span> <span class="n">Boss</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># this is the main entry point of the kitten, it will be executed in</span>
    <span class="c1"># the overlay window when the kitten is launched</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Enter some text: '</span><span class="p">)</span>
    <span class="c1"># whatever this function returns will be available in the</span>
    <span class="c1"># handle_result() function</span>
    <span class="k">return</span> <span class="n">answer</span>

<span class="k">def</span> <span class="nf">handle_result</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">answer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_window_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">boss</span><span class="p">:</span> <span class="n">Boss</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># get the kitty window into which to paste answer</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">boss</span><span class="o">.</span><span class="n">window_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">target_window_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>Now in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code> add the lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">ctrl</span><span class="o">+</span><span class="n">k</span> <span class="n">kitten</span> <span class="n">mykitten</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Start kitty and press <kbd class="kbd docutils literal notranslate">ctrl+k</kbd> and you should see the kitten running.
The best way to develop your own kittens is to modify one of the built in
kittens. Look in the kittens sub-directory of the kitty source code for those.
Or see below for a list of <a class="reference internal" href="#external-kittens"><span class="std std-ref">third-party kittens</span></a>,
that other kitty users have created.</p>
<div class="section" id="passing-arguments-to-kittens">
<h2>Passing arguments to kittens<a class="headerlink" href="#passing-arguments-to-kittens" title="Permalink to this headline">¶</a></h2>
<p>You can pass arguments to kittens by defining them in the map directive in
<code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">ctrl</span><span class="o">+</span><span class="n">k</span> <span class="n">kitten</span> <span class="n">mykitten</span><span class="o">.</span><span class="n">py</span> <span class="n">arg1</span> <span class="n">arg2</span>
</pre></div>
</div>
<p>These will be available as the <code class="docutils literal notranslate"><span class="pre">args</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">main()</span></code> and
<code class="docutils literal notranslate"><span class="pre">handle_result()</span></code> functions. Note also that the current working directory
of the kitten is set to the working directory of whatever program is
running in the active kitty window. The special argument <code class="docutils literal notranslate"><span class="pre">@selection</span></code>
is replaced by the currently selected text in the active kitty window.</p>
</div>
<div class="section" id="passing-the-contents-of-the-screen-to-the-kitten">
<h2>Passing the contents of the screen to the kitten<a class="headerlink" href="#passing-the-contents-of-the-screen-to-the-kitten" title="Permalink to this headline">¶</a></h2>
<p>If you would like your kitten to have access to the contents of the screen
and/or the scrollback buffer, you just need to add an annotation to the <code class="docutils literal notranslate"><span class="pre">handle_result()</span></code>
function, telling kitty what kind of input your kitten would like. For example:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># in main, STDIN is for the kitten process and will contain</span>
<span class="c1"># the contents of the screen</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># in handle_result, STDIN is for the kitty process itself, rather</span>
<span class="c1"># than the kitten process and should not be read from.</span>
<span class="kn">from</span> <span class="nn">kittens.tui.handler</span> <span class="kn">import</span> <span class="n">result_handler</span>
<span class="nd">@result_handler</span><span class="p">(</span><span class="n">type_of_input</span><span class="o">=</span><span class="s1">'text'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_result</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">stdin_data</span><span class="p">,</span> <span class="n">target_window_id</span><span class="p">,</span> <span class="n">boss</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This will send the plain text of the active window to the kitten’s
<code class="file docutils literal notranslate"><span class="pre">STDIN</span></code>. For text with formatting escape codes, use <code class="docutils literal notranslate"><span class="pre">ansi</span></code>
instead. If you want line wrap markers as well, use <code class="docutils literal notranslate"><span class="pre">screen-ansi</span></code>
or just <code class="docutils literal notranslate"><span class="pre">screen</span></code>. For the scrollback buffer as well, use
<code class="docutils literal notranslate"><span class="pre">history</span></code>, <code class="docutils literal notranslate"><span class="pre">ansi-history</span></code> or <code class="docutils literal notranslate"><span class="pre">screen-history</span></code>. To get
the currently selected text, use <code class="docutils literal notranslate"><span class="pre">selection</span></code>.</p>
</div>
<div class="section" id="using-kittens-to-script-kitty-without-any-terminal-ui">
<h2>Using kittens to script kitty, without any terminal UI<a class="headerlink" href="#using-kittens-to-script-kitty-without-any-terminal-ui" title="Permalink to this headline">¶</a></h2>
<p>If you would like your kitten to script kitty, without bothering to write a
terminal program, you can tell the kittens system to run the
<code class="docutils literal notranslate"><span class="pre">handle_result()</span></code> function without first running the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.</p>
<p>For example, here is a kitten that “zooms/unzooms” the current terminal window
by switching to the stack layout or back to the previous layout. This is
equivalent to the builtin <a class="reference internal" href="../../actions/#action-toggle-layout"><span class="std std-ref">toggle_layout</span></a> action.</p>
<p>Create a file in the kitty config folder, <code class="file docutils literal notranslate"><span class="pre">~/.config/kitty/zoom_toggle.py</span></code></p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="kn">from</span> <span class="nn">kittens.tui.handler</span> <span class="kn">import</span> <span class="n">result_handler</span>
<span class="nd">@result_handler</span><span class="p">(</span><span class="n">no_ui</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_result</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">target_window_id</span><span class="p">,</span> <span class="n">boss</span><span class="p">):</span>
    <span class="n">tab</span> <span class="o">=</span> <span class="n">boss</span><span class="o">.</span><span class="n">active_tab</span>
    <span class="k">if</span> <span class="n">tab</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">tab</span><span class="o">.</span><span class="n">current_layout</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'stack'</span><span class="p">:</span>
            <span class="n">tab</span><span class="o">.</span><span class="n">last_used_layout</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tab</span><span class="o">.</span><span class="n">goto_layout</span><span class="p">(</span><span class="s1">'stack'</span><span class="p">)</span>
</pre></div>
</div>
<p>Now in kitty.conf add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f11</span> <span class="n">kitten</span> <span class="n">zoom_toggle</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Pressing <kbd class="kbd docutils literal notranslate">F11</kbd> will now act as a zoom toggle function. You can get even
more fancy, switching the kitty OS window to fullscreen as well as changing the
layout, by simply adding the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">boss</span><span class="o">.</span><span class="n">toggle_fullscreen</span><span class="p">()</span>
</pre></div>
</div>
<p>To the <code class="docutils literal notranslate"><span class="pre">handle_result()</span></code> function, above.</p>
</div>
<div class="section" id="sending-mouse-events">
<span id="send-mouse-event"></span><h2>Sending mouse events<a class="headerlink" href="#sending-mouse-events" title="Permalink to this headline">¶</a></h2>
<p>If the program running in a window is receiving mouse events you can simulate
those using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kitty.fast_data_types</span> <span class="kn">import</span> <span class="n">send_mouse_event</span>
<span class="n">send_mouse_event</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">mods</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">screen</span></code> is the <code class="docutils literal notranslate"><span class="pre">screen</span></code> attribute of the window you want to send the event
to. <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are the 0-indexed coordinates. <code class="docutils literal notranslate"><span class="pre">button</span></code> is a number using
the same numbering as X11 (left: <code class="docutils literal notranslate"><span class="pre">1</span></code>, middle: <code class="docutils literal notranslate"><span class="pre">2</span></code>, right: <code class="docutils literal notranslate"><span class="pre">3</span></code>, scroll up:
<code class="docutils literal notranslate"><span class="pre">4</span></code>, scroll down: <code class="docutils literal notranslate"><span class="pre">5</span></code>, scroll left: <code class="docutils literal notranslate"><span class="pre">6</span></code>, scroll right: <code class="docutils literal notranslate"><span class="pre">7</span></code>, back:
<code class="docutils literal notranslate"><span class="pre">8</span></code>, forward: <code class="docutils literal notranslate"><span class="pre">9</span></code>). <code class="docutils literal notranslate"><span class="pre">action</span></code> is one of <code class="docutils literal notranslate"><span class="pre">PRESS</span></code>, <code class="docutils literal notranslate"><span class="pre">RELEASE</span></code>, <code class="docutils literal notranslate"><span class="pre">DRAG</span></code>
or <code class="docutils literal notranslate"><span class="pre">MOVE</span></code>. <code class="docutils literal notranslate"><span class="pre">mods</span></code> is a bitmask of <code class="docutils literal notranslate"><span class="pre">GLFW_MOD_{mod}</span></code> where <code class="docutils literal notranslate"><span class="pre">{mod}</span></code> is one
of <code class="docutils literal notranslate"><span class="pre">SHIFT</span></code>, <code class="docutils literal notranslate"><span class="pre">CONTROL</span></code> or <code class="docutils literal notranslate"><span class="pre">ALT</span></code>. All the mentioned constants are imported
from <code class="docutils literal notranslate"><span class="pre">kitty.fast_data_types</span></code>.</p>
<p>For example, to send a left click at position x: 2, y: 3 to the active window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kitty.fast_data_types</span> <span class="kn">import</span> <span class="n">send_mouse_event</span><span class="p">,</span> <span class="n">PRESS</span>
<span class="n">send_mouse_event</span><span class="p">(</span><span class="n">boss</span><span class="o">.</span><span class="n">active_window</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">PRESS</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The function will only send the event if the program is receiving events of
that type, and will return <code class="docutils literal notranslate"><span class="pre">True</span></code> if it sent the event, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.</p>
</div>
<div class="section" id="debugging-kittens">
<h2>Debugging kittens<a class="headerlink" href="#debugging-kittens" title="Permalink to this headline">¶</a></h2>
<p>The part of the kitten that runs in <code class="docutils literal notranslate"><span class="pre">main()</span></code> is just a normal program and
the output of print statements will be visible in the kitten window. Or
alternately, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kittens.tui.loop</span> <span class="kn">import</span> <span class="n">debug</span>
<span class="n">debug</span><span class="p">(</span><span class="s1">'whatever'</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">debug()</span></code> function is just like <code class="docutils literal notranslate"><span class="pre">print()</span></code> except that the output
will appear in the <code class="docutils literal notranslate"><span class="pre">STDOUT</span></code> of the kitty process inside which the kitten is
running.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">handle_result()</span></code> part of the kitten runs inside the kitty process.
The output of print statements will go to the <code class="docutils literal notranslate"><span class="pre">STDOUT</span></code> of the kitty process.
So if you run kitty from another kitty instance, the output will be visible
in the first kitty instance.</p>
</div>
<div class="section" id="adding-options-to-kittens">
<h2>Adding options to kittens<a class="headerlink" href="#adding-options-to-kittens" title="Permalink to this headline">¶</a></h2>
<p>If you would like to use kitty’s config framework to make your kittens
configurable, you will need some boilerplate. In the directory
of your kitten make the following files.</p>
<p><code class="file docutils literal notranslate"><span class="pre">kitten_options_definition.py</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kitty.conf.types</span> <span class="kn">import</span> <span class="n">Action</span><span class="p">,</span> <span class="n">Definition</span>

<span class="n">definition</span> <span class="o">=</span> <span class="n">Definition</span><span class="p">(</span>
    <span class="s1">'!kitten_options_utils'</span><span class="p">,</span>
    <span class="n">Action</span><span class="p">(</span>
        <span class="s1">'map'</span><span class="p">,</span> <span class="s1">'parse_map'</span><span class="p">,</span>
        <span class="p">{</span><span class="s1">'key_definitions'</span><span class="p">:</span> <span class="s1">'kitty.conf.utils.KittensKeyMap'</span><span class="p">},</span>
        <span class="p">[</span><span class="s1">'kitty.types.ParsedShortcut'</span><span class="p">,</span> <span class="s1">'kitty.conf.utils.KeyAction'</span><span class="p">]</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">agr</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">add_group</span>
<span class="n">egr</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">end_group</span>
<span class="n">opt</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">add_option</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">definition</span><span class="o">.</span><span class="n">add_map</span>

<span class="c1"># main options {{{</span>
<span class="n">agr</span><span class="p">(</span><span class="s1">'main'</span><span class="p">,</span> <span class="s1">'Main'</span><span class="p">)</span>

<span class="n">opt</span><span class="p">(</span><span class="s1">'some_option'</span><span class="p">,</span> <span class="s1">'33'</span><span class="p">,</span>
    <span class="n">option_type</span><span class="o">=</span><span class="s1">'some_option_parser'</span><span class="p">,</span>
    <span class="n">long_text</span><span class="o">=</span><span class="s1">'''</span>
<span class="s1">Help text for this option</span>
<span class="s1">'''</span>
    <span class="p">)</span>
<span class="n">egr</span><span class="p">()</span>  <span class="c1"># }}}</span>

<span class="c1"># shortcuts {{{</span>
<span class="n">agr</span><span class="p">(</span><span class="s1">'shortcuts'</span><span class="p">,</span> <span class="s1">'Keyboard shortcuts'</span><span class="p">)</span>

<span class="nb">map</span><span class="p">(</span><span class="s1">'Quit'</span><span class="p">,</span> <span class="s1">'quit q quit'</span><span class="p">)</span>
<span class="n">egr</span><span class="p">()</span>  <span class="c1"># }}}</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">kitten_options_utils.py</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kitty.conf.utils</span> <span class="kn">import</span> <span class="n">KittensKeyDefinition</span><span class="p">,</span> <span class="n">key_func</span><span class="p">,</span> <span class="n">parse_kittens_key</span>

<span class="n">func_with_args</span><span class="p">,</span> <span class="n">args_funcs</span> <span class="o">=</span> <span class="n">key_func</span><span class="p">()</span>
<span class="n">FuncArgsType</span> <span class="o">=</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">some_option_parser</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3000</span>

<span class="k">def</span> <span class="nf">parse_map</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KittensKeyDefinition</span><span class="p">]:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">parse_kittens_key</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">args_funcs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">x</span>
</pre></div>
</div>
<p>Then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kitty</span> <span class="o">+</span><span class="n">runpy</span> <span class="s1">'from kitty.conf.generate import main; main()'</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">kitten_options_definition</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>You can parse and read the options in your kitten using the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.kitten_options_types</span> <span class="kn">import</span> <span class="n">Options</span><span class="p">,</span> <span class="n">defaults</span>
<span class="kn">from</span> <span class="nn">kitty.conf.utils</span> <span class="kn">import</span> <span class="n">load_config</span> <span class="k">as</span> <span class="n">_load_config</span><span class="p">,</span> <span class="n">parse_config_base</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">def</span> <span class="nf">load_config</span><span class="p">(</span><span class="o">*</span><span class="n">paths</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Options</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.kitten_options_parse</span> <span class="kn">import</span>  <span class="p">(</span>
        <span class="n">create_result_dict</span><span class="p">,</span> <span class="n">merge_result_dicts</span><span class="p">,</span> <span class="n">parse_conf_item</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse_config</span><span class="p">(</span><span class="n">lines</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">ans</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">create_result_dict</span><span class="p">()</span>
        <span class="n">parse_config_base</span><span class="p">(</span>
            <span class="n">lines</span><span class="p">,</span>
            <span class="n">parse_conf_item</span><span class="p">,</span>
            <span class="n">ans</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">ans</span>

    <span class="n">overrides</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span> <span class="k">if</span> <span class="n">overrides</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">()</span>
    <span class="n">opts_dict</span><span class="p">,</span> <span class="n">paths</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">defaults</span><span class="p">,</span> <span class="n">parse_config</span><span class="p">,</span> <span class="n">merge_result_dicts</span><span class="p">,</span> <span class="o">*</span><span class="n">paths</span><span class="p">,</span> <span class="n">overrides</span><span class="o">=</span><span class="n">overrides</span><span class="p">)</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">Options</span><span class="p">(</span><span class="n">opts_dict</span><span class="p">)</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">config_paths</span> <span class="o">=</span> <span class="n">paths</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">config_overrides</span> <span class="o">=</span> <span class="n">overrides</span>
    <span class="k">return</span> <span class="n">opts</span>
</pre></div>
</div>
<p>See the code for the builtin diff kitten for examples of creating more options
and keyboard shortcuts.</p>
</div>
<div class="section" id="kittens-created-by-kitty-users">
<span id="external-kittens"></span><h2>Kittens created by kitty users<a class="headerlink" href="#kittens-created-by-kitty-users" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><a class="reference external" href="https://github.com/knubie/vim-kitty-navigator">vim-kitty-navigator</a></dt><dd><p>Allows you to navigate seamlessly between vim and kitty splits using a consistent set of hotkeys.</p>
</dd>
<dt><a class="reference external" href="https://github.com/yurikhan/kitty-smart-scroll">smart-scroll</a></dt><dd><p>Makes the kitty scroll bindings work in full screen applications</p>
</dd>
<dt><a class="reference external" href="https://github.com/kovidgoyal/kitty/issues/1222">insert password</a></dt><dd><p>Insert a password from a CLI password manager, taking care to only do it at
a password prompt.</p>
</dd>
<dt><a class="reference external" href="https://github.com/GermainZ/kitty-weechat-hints">weechat-hints</a></dt><dd><p>URL hints kitten for WeeChat that works without having to use WeeChat’s
raw-mode.</p>
</dd>
</dl>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../broadcast/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">broadcast</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../hyperlinked_grep/">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Hyperlinked grep</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Kovid Goyal
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Custom kittens</a><ul>
<li><a class="reference internal" href="#passing-arguments-to-kittens">Passing arguments to kittens</a></li>
<li><a class="reference internal" href="#passing-the-contents-of-the-screen-to-the-kitten">Passing the contents of the screen to the kitten</a></li>
<li><a class="reference internal" href="#using-kittens-to-script-kitty-without-any-terminal-ui">Using kittens to script kitty, without any terminal UI</a></li>
<li><a class="reference internal" href="#sending-mouse-events">Sending mouse events</a></li>
<li><a class="reference internal" href="#debugging-kittens">Debugging kittens</a></li>
<li><a class="reference internal" href="#adding-options-to-kittens">Adding options to kittens</a></li>
<li><a class="reference internal" href="#kittens-created-by-kitty-users">Kittens created by kitty users</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/main.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    </body>
</html>