<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="Frequently Asked Questions" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sw.kovidgoyal.net/kitty/faq.html" />
  <meta property="og:description" content="Some special symbols are rendered small/truncated in kitty?: The number of cells a unicode character takes up are controlled by the unicode standard. All characters are rendered in a single cell un..." />
  <link rel="index" title="Index" href="../genindex/" /><link rel="search" title="Search" href="../search/" /><link rel="next" title="Support kitty development" href="../support/" /><link rel="prev" title="Mark text on screen" href="../marks/" />

    <link rel="shortcut icon" href="../_static/kitty.svg"/><meta name="generator" content="sphinx-4.1.1, furo 2021.07.05.beta38"/>
        <title>Frequently Asked Questions - kitty</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css" />
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
  
      <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20736318-2']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../"><div class="brand">kitty</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/kitty.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search/">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../quickstart/">Quickstart</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../binary/">Install kitty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build/">Build from source</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/">Overview</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../conf/">Configure kitty</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../actions/">Mappable actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layouts/">Arrange windows</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../kittens_intro/">Extend kitty</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../kittens/icat/">icat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/diff/">kitty-diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/unicode-input/">Unicode input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hints/">Hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/remote_file/">Remote files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hyperlinked_grep/">Hyperlinked grep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/custom/">Custom kittens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/broadcast/">broadcast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/clipboard/">clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/panel/">Draw a GPU accelerated dock panel on your desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/query_terminal/">Query terminal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../remote-control/">Control kitty from scripts</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../rc_protocol/">The kitty remote control protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../launch/">Launching new tabs/windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../open_actions/">Scripting the mouse click</a></li>
<li class="toctree-l2"><a class="reference internal" href="../marks/">Mark text on screen</a></li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/">Support kitty development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/">Integrations with other tools</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocol-extensions/">Terminal protocol extensions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../underlines/">Colored and styled underlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics-protocol/">The terminal graphics protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keyboard-protocol/">Comprehensive keyboard handling in terminals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../desktop-notifications/">Desktop notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unscroll/">Unscrolling the screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clipboard/">Pasting to clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color-stack/">Saving and restoring colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deccara/">Setting text styles/colors in arbitrary regions of the screen</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="some-special-symbols-are-rendered-small-truncated-in-kitty">
<h2>Some special symbols are rendered small/truncated in kitty?<a class="headerlink" href="#some-special-symbols-are-rendered-small-truncated-in-kitty" title="Permalink to this headline">¶</a></h2>
<p>The number of cells a unicode character takes up are controlled by the unicode
standard.  All characters are rendered in a single cell unless the unicode
standard says they should be rendered in two cells. When a symbol does not fit,
it will either be rescaled to be smaller or truncated (depending on how much
extra space it needs). This is often different from other terminals which just
let the character overflow into neighboring cells, which is fine if the
neighboring cell is empty, but looks terrible if it is not.</p>
<p>Some programs, like powerline, vim with fancy gutter symbols/status-bar, etc.
misuse unicode characters from the private use area to represent symbols. Often
these symbols are square and should be rendered in two cells.  However, since
private use area symbols all have their width set to one in the unicode
standard, <em>kitty</em> renders them either smaller or truncated. The exception is if
these characters are followed by a space or empty cell in which case kitty
makes use of the extra cell to render them in two cells.</p>
</div>
<div class="section" id="using-a-color-theme-with-a-background-color-does-not-work-well-in-vim">
<h2>Using a color theme with a background color does not work well in vim?<a class="headerlink" href="#using-a-color-theme-with-a-background-color-does-not-work-well-in-vim" title="Permalink to this headline">¶</a></h2>
<p>First make sure you have not changed the TERM environment variable, it should
be <code class="docutils literal notranslate"><span class="pre">xterm-kitty</span></code>. vim uses <em>background color erase</em> even if the terminfo file
does not contain the <code class="docutils literal notranslate"><span class="pre">bce</span></code> capability. This is a bug in vim. You can work around
it by adding the following to your vimrc:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">let</span> <span class="p">&amp;</span><span class="nv">t_ut</span><span class="o">=</span><span class="s1">''</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../deccara/"><span class="doc">here</span></a> for why <em>kitty</em> does not support background color erase.</p>
</div>
<div class="section" id="i-get-errors-about-the-terminal-being-unknown-or-opening-the-terminal-failing-when-sshing-into-a-different-computer">
<h2>I get errors about the terminal being unknown or opening the terminal failing when SSHing into a different computer?<a class="headerlink" href="#i-get-errors-about-the-terminal-being-unknown-or-opening-the-terminal-failing-when-sshing-into-a-different-computer" title="Permalink to this headline">¶</a></h2>
<p>This happens because the <em>kitty</em> terminfo files are not available on the server.
You can ssh in using the following command which will automatically copy the
terminfo files to the server:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kitty +kitten ssh myserver
</pre></div>
</div>
<p>This ssh kitten takes all the same command line arguments
as ssh, you can alias it to ssh in your shell’s rc files to avoid having to
type it each time:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">ssh</span><span class="o">=</span><span class="s2">"kitty +kitten ssh"</span>
</pre></div>
</div>
<p>If for some reason that does not work (typically because the server is using a
non POSIX compliant shell as <code class="docutils literal notranslate"><span class="pre">/bin/sh</span></code>), you can try using it with <code class="docutils literal notranslate"><span class="pre">python</span></code>
instead:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kitty +kitten ssh use-python myserver
</pre></div>
</div>
<p>If that also fails, perhaps because python is not installed on the remote
server, use the following one-liner instead (it
is slower as it needs to ssh into the server twice, but will work with most
servers):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>infocmp -a xterm-kitty <span class="p">|</span> ssh myserver tic -x -o <span class="se">\~</span>/.terminfo /dev/stdin
</pre></div>
</div>
<p>If you are behind a proxy (like Balabit) that prevents this, you must redirect the
1st command to a file, copy that to the server and run <code class="docutils literal notranslate"><span class="pre">tic</span></code> manually.  If you
connect to a server, embedded or Android system that doesn’t have <code class="docutils literal notranslate"><span class="pre">tic</span></code>, copy over
your local file terminfo to the other system as <code class="file docutils literal notranslate"><span class="pre">~/.terminfo/x/xterm-kitty</span></code>.</p>
<p>Really, the correct solution for this is to convince the OpenSSH maintainers to
have ssh do this automatically, if possible, when connecting to a server, so that
all terminals work transparently.</p>
<p>If the server is running FreeBSD, or another system that relies on termcap
rather than terminfo, you will need to convert the terminfo file on your local
machine by running (on local machine with <em>kitty</em>):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>infocmp -C xterm-kitty
</pre></div>
</div>
<p>The output of this command is the termcap description, which should be appended
to <code class="file docutils literal notranslate"><span class="pre">/usr/share/misc/termcap</span></code> on the remote server. Then run the following
command to apply your change (on the server):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cap_mkdb /usr/share/misc/termcap
</pre></div>
</div>
</div>
<div class="section" id="keys-such-as-arrow-keys-backspace-delete-home-end-etc-do-not-work-when-using-su-or-sudo">
<h2>Keys such as arrow keys, backspace, delete, home/end, etc. do not work when using su or sudo?<a class="headerlink" href="#keys-such-as-arrow-keys-backspace-delete-home-end-etc-do-not-work-when-using-su-or-sudo" title="Permalink to this headline">¶</a></h2>
<p>Make sure the TERM environment variable, is <code class="docutils literal notranslate"><span class="pre">xterm-kitty</span></code>.  And either the
TERMINFO environment variable points to a directory containing <code class="file docutils literal notranslate"><span class="pre">x/xterm-kitty</span></code>
or that file is under <code class="file docutils literal notranslate"><span class="pre">~/.terminfo/x/</span></code>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">sudo</span></code> might remove TERMINFO.  Then setting it at the shell prompt can
be too late, because command line editing may not be reinitialized.  In that case
you can either ask <code class="docutils literal notranslate"><span class="pre">sudo</span></code> to set it or if that is not supported, insert an <code class="docutils literal notranslate"><span class="pre">env</span></code>
command before starting the shell, or, if not possible, after sudo start another
Shell providing the right terminfo path:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo … <span class="nv">TERMINFO</span><span class="o">=</span><span class="nv">$HOME</span>/.terminfo bash -i
sudo … env <span class="nv">TERMINFO</span><span class="o">=</span><span class="nv">$HOME</span>/.terminfo bash -i
<span class="nv">TERMINFO</span><span class="o">=</span>/home/ORIGINALUSER/.terminfo <span class="nb">exec</span> bash -i
</pre></div>
</div>
<p>You can configure sudo to preserve TERMINFO by running <code class="docutils literal notranslate"><span class="pre">sudo</span>
<span class="pre">visudo</span></code> and adding the following line:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Defaults <span class="nv">env_keep</span> <span class="o">+=</span> <span class="s2">"TERM TERMINFO"</span>
</pre></div>
</div>
<p>If you have double width characters in your prompt, you may also need to
explicitly set a UTF-8 locale, like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-change-the-colors-in-a-running-kitty-instance">
<h2>How do I change the colors in a running kitty instance?<a class="headerlink" href="#how-do-i-change-the-colors-in-a-running-kitty-instance" title="Permalink to this headline">¶</a></h2>
<p>You can either use the
<a class="reference external" href="https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h3-Operating-System-Commands">OSC terminal escape codes</a>
to set colors or you can define keyboard shortcuts to set colors, for example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>map f1 set_colors --configured /path/to/some/config/file/colors.conf
</pre></div>
</div>
<p>Or you can enable <a class="reference internal" href="../remote-control/"><span class="doc">remote control</span></a> for <em>kitty</em> and use <a class="reference internal" href="../remote-control/#at-set-colors"><span class="std std-ref">kitty @ set-colors</span></a>.
The shortcut mapping technique has the same syntax as the remote control
command, for details, see <a class="reference internal" href="../remote-control/#at-set-colors"><span class="std std-ref">kitty @ set-colors</span></a>.</p>
<p>A list of pre-made color themes for kitty is available at:
<a class="reference external" href="https://github.com/dexpota/kitty-themes">kitty-themes</a></p>
<p>Examples of using OSC escape codes to set colors:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Change the default foreground color:
<span class="nb">printf</span> <span class="s1">'\x1b]10;#ff0000\x1b\\'</span>
Change the default background color:
<span class="nb">printf</span> <span class="s1">'\x1b]11;blue\x1b\\'</span>
Change the cursor color:
<span class="nb">printf</span> <span class="s1">'\x1b]12;blue\x1b\\'</span>
Change the selection background color:
<span class="nb">printf</span> <span class="s1">'\x1b]17;blue\x1b\\'</span>
Change the selection foreground color:
<span class="nb">printf</span> <span class="s1">'\x1b]19;blue\x1b\\'</span>
Change the nth color <span class="o">(</span><span class="m">0</span> - <span class="m">255</span><span class="o">)</span>:
<span class="nb">printf</span> <span class="s1">'\x1b]4;n;green\x1b\\'</span>
</pre></div>
</div>
<p>You can use various syntaxes/names for color specifications in the above
examples. See <a class="reference external" href="https://linux.die.net/man/3/xparsecolor">XParseColor</a>
for full details.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">?</span></code> is given rather than a color specification, kitty will respond
with the current value for the specified color.</p>
</div>
<div class="section" id="how-do-i-specify-command-line-options-for-kitty-on-macos">
<h2>How do I specify command line options for kitty on macOS?<a class="headerlink" href="#how-do-i-specify-command-line-options-for-kitty-on-macos" title="Permalink to this headline">¶</a></h2>
<p>Apple does not want you to use command line options with GUI applications. To
workaround that limitation, <em>kitty</em> will read command line options from the file
<code class="file docutils literal notranslate"><span class="pre">&lt;kitty</span> <span class="pre">config</span> <span class="pre">dir&gt;/macos-launch-services-cmdline</span></code> when it is launched
from the GUI, i.e. by clicking the <em>kitty</em> application icon or using <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">-a</span> <span class="pre">kitty</span></code>.
Note that this file is <em>only read</em> when running via the GUI.</p>
<p>You can, of course, also run <em>kitty</em> from a terminal with command line options, using:
<code class="file docutils literal notranslate"><span class="pre">/Applications/kitty.app/Contents/MacOS/kitty</span></code>.</p>
<p>And within <em>kitty</em> itself, you can always run <em>kitty</em> using just <cite>kitty</cite> as it
cleverly adds itself to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
</div>
<div class="section" id="i-catted-a-binary-file-and-now-kitty-is-hung">
<h2>I catted a binary file and now kitty is hung?<a class="headerlink" href="#i-catted-a-binary-file-and-now-kitty-is-hung" title="Permalink to this headline">¶</a></h2>
<p><strong>Never</strong> output unknown binary data directly into a terminal.</p>
<p>Terminals have a single channel for both data and control. Certain bytes
are control codes. Some of these control codes are of arbitrary length, so
if the binary data you output into the terminal happens to contain the starting
sequence for one of these control codes, the terminal will hang waiting for
the closing sequence. Press <kbd class="kbd docutils literal notranslate">ctrl+shift+delete</kbd> to reset the terminal.</p>
<p>If you do want to cat unknown data, use <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">-v</span></code>.</p>
</div>
<div class="section" id="kitty-is-not-able-to-use-my-favorite-font">
<h2>kitty is not able to use my favorite font?<a class="headerlink" href="#kitty-is-not-able-to-use-my-favorite-font" title="Permalink to this headline">¶</a></h2>
<p><em>kitty</em> achieves its stellar performance by caching alpha masks of each rendered
character on the GPU, so that every character needs to be rendered only once.
This means it is a strictly character cell based display.  As such it can use
only monospace fonts, since every cell in the grid has to be the same size.
Furthermore, it needs fonts to be freely resizable, so it does not support
bitmapped fonts.</p>
<p>If your font is not listed in <code class="docutils literal notranslate"><span class="pre">kitty</span> <span class="pre">list-fonts</span></code> it means that it is not
monospace or is a bitmapped font. On Linux you can list all monospace fonts with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>fc-list : family spacing outline scalable <span class="p">|</span> grep -e <span class="nv">spacing</span><span class="o">=</span><span class="m">100</span> -e <span class="nv">spacing</span><span class="o">=</span><span class="m">90</span> <span class="p">|</span> grep -e <span class="nv">outline</span><span class="o">=</span>True <span class="p">|</span> grep -e <span class="nv">scalable</span><span class="o">=</span>True
</pre></div>
</div>
<p>Note that the spacing property is calculated by fontconfig based on actual
glyph widths in the font. If for some reason fontconfig concludes your favorite
monospace font does not have <code class="docutils literal notranslate"><span class="pre">spacing=100</span></code> you can override it by using the
following <code class="file docutils literal notranslate"><span class="pre">~/.config/fontconfig/fonts.conf</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span>?&gt;
&lt;!DOCTYPE fontconfig SYSTEM <span class="s2">"fonts.dtd"</span>&gt;
&lt;fontconfig&gt;
&lt;match <span class="nv">target</span><span class="o">=</span><span class="s2">"scan"</span>&gt;
    &lt;<span class="nb">test</span> <span class="nv">name</span><span class="o">=</span><span class="s2">"family"</span>&gt;
        &lt;string&gt;Your Font Family Name&lt;/string&gt;
    &lt;/test&gt;
    &lt;edit <span class="nv">name</span><span class="o">=</span><span class="s2">"spacing"</span>&gt;
        &lt;int&gt;100&lt;/int&gt;
    &lt;/edit&gt;
&lt;/match&gt;
&lt;/fontconfig&gt;
</pre></div>
</div>
<p>After creating (or modifying) this file, you may need to run the following
command to rebuild your fontconfig cache:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>fc-cache -r
</pre></div>
</div>
<p>Then, the font will be available in <code class="docutils literal notranslate"><span class="pre">kitty</span> <span class="pre">list-fonts</span></code>.</p>
</div>
<div class="section" id="how-can-i-assign-a-single-global-shortcut-to-bring-up-the-kitty-terminal">
<h2>How can I assign a single global shortcut to bring up the kitty terminal?<a class="headerlink" href="#how-can-i-assign-a-single-global-shortcut-to-bring-up-the-kitty-terminal" title="Permalink to this headline">¶</a></h2>
<p>Bringing up applications on a single key press is the job of the window
manager/desktop environment. For ways to do it with kitty (or indeed any
terminal) in different environments,
see <a class="reference external" href="https://github.com/kovidgoyal/kitty/issues/45">here</a>.</p>
</div>
<div class="section" id="how-do-i-map-key-presses-in-kitty-to-different-keys-in-the-terminal-program">
<h2>How do I map key presses in kitty to different keys in the terminal program?<a class="headerlink" href="#how-do-i-map-key-presses-in-kitty-to-different-keys-in-the-terminal-program" title="Permalink to this headline">¶</a></h2>
<p>This is accomplished by using <code class="docutils literal notranslate"><span class="pre">map</span></code> with <a class="reference internal" href="../conf/#shortcut-kitty.Send-arbitrary-text-on-key-presses"><code class="xref std std-sc docutils literal notranslate"><span class="pre">send_text</span></code></a> in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>.
For example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>map alt+s send_text normal,application <span class="se">\x</span><span class="m">13</span>
</pre></div>
</div>
<p>This maps <kbd class="kbd docutils literal notranslate">alt+s</kbd> to <kbd class="kbd docutils literal notranslate">ctrl+s</kbd>. To figure out what bytes to use for
the <a class="reference internal" href="../conf/#shortcut-kitty.Send-arbitrary-text-on-key-presses"><code class="xref std std-sc docutils literal notranslate"><span class="pre">send_text</span></code></a> you can use the <code class="docutils literal notranslate"><span class="pre">show_key</span></code> kitten. Run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kitty +kitten show_key
</pre></div>
</div>
<p>Then press the key you want to emulate.</p>
</div>
<div class="section" id="how-do-i-open-a-new-window-or-tab-with-the-same-working-directory-as-the-current-window">
<h2>How do I open a new window or tab with the same working directory as the current window?<a class="headerlink" href="#how-do-i-open-a-new-window-or-tab-with-the-same-working-directory-as-the-current-window" title="Permalink to this headline">¶</a></h2>
<p>In <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code> add the following:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>map f1 launch --cwd<span class="o">=</span>current
map f2  launch --cwd<span class="o">=</span>current --type<span class="o">=</span>tab
</pre></div>
</div>
<p>Pressing <kbd class="kbd docutils literal notranslate">F1</kbd> will open a new kitty window with the same working directory
as the current window. The <a class="reference internal" href="../launch/"><span class="doc">launch command</span></a> is very powerful,
explore <a class="reference internal" href="../launch/"><span class="doc">its documentation</span></a>.</p>
</div>
<div class="section" id="things-behave-differently-when-running-kitty-from-system-launcher-vs-from-another-terminal">
<h2>Things behave differently when running kitty from system launcher vs. from another terminal?<a class="headerlink" href="#things-behave-differently-when-running-kitty-from-system-launcher-vs-from-another-terminal" title="Permalink to this headline">¶</a></h2>
<p>This will be because of environment variables. When you run kitty from the
system launcher, it gets a default set of system environment variables. When
you run kitty from another terminal, you are actually running it from a shell,
and the shell’s rc files will have setup a whole different set of environment
variables which kitty will now inherit.</p>
<p>You need to make sure that the environment variables you define in your shell’s
rc files are either also defined system wide or via the <a class="reference internal" href="../conf/#opt-kitty.env"><code class="xref std std-opt docutils literal notranslate"><span class="pre">env</span></code></a> directive in
<code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>. Common environment variables that cause issues are those
related to localization, such as <code class="docutils literal notranslate"><span class="pre">LANG,</span> <span class="pre">LC_*</span></code> and loading of configuration
files such as <code class="docutils literal notranslate"><span class="pre">XDG_*,</span> <span class="pre">KITTY_CONFIG_DIRECTORY</span></code>.</p>
<p>To see the environment variables that kitty sees, you can add the following
mapping to <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>map f1 show_kitty_env_vars
</pre></div>
</div>
<p>then pressing <kbd class="kbd docutils literal notranslate">F1</kbd> will show you the environment variables kitty sees.</p>
<p>This problem is most common on macOS, as Apple makes it exceedingly difficult to
setup environment variables system-wide, so people end up putting them in all
sorts of places where they may or may not work.</p>
</div>
<div class="section" id="i-am-using-tmux-and-have-a-problem">
<h2>I am using tmux and have a problem<a class="headerlink" href="#i-am-using-tmux-and-have-a-problem" title="Permalink to this headline">¶</a></h2>
<p>First, terminal multiplexers are <a class="reference external" href="https://github.com/kovidgoyal/kitty/issues/391#issuecomment-638320745">a bad idea</a>, do
not use them, if at all possible. kitty contains features that do all of what
tmux does, but better, with the exception of remote persistence (<a class="reference external" href="https://github.com/kovidgoyal/kitty/issues/391">#391</a>).
If you still want to use tmux, read on.</p>
<p>Image display will not work, see <a class="reference external" href="https://github.com/tmux/tmux/issues/1391">tmux issue</a>.</p>
<p>If you are using tmux with multiple terminals or you start it under one
terminal and then switch to another and these terminals have different TERM
variables, tmux will break. You will need to restart it as tmux does not
support multiple terminfo definitions.</p>
<p>Copying to clipboard via OSC 52 will not work, because tmux does not support
the extended version of that protocol, you will need to add <code class="docutils literal notranslate"><span class="pre">no-append</span></code> to
<a class="reference internal" href="../conf/#opt-kitty.clipboard_control"><code class="xref std std-opt docutils literal notranslate"><span class="pre">clipboard_control</span></code></a> in kitty.conf.</p>
<p>If you use any of the advanced features that kitty has innovated, such as
styled underlines, desktop notifications, extended keyboard support, etc.
they may or may not work, depending on the whims of tmux’s maintainer, your
version of tmux, etc.</p>
</div>
<div class="section" id="i-opened-and-closed-a-lot-of-windows-tabs-and-top-shows-kitty-s-memory-usage-is-very-high">
<h2>I opened and closed a lot of windows/tabs and top shows kitty’s memory usage is very high?<a class="headerlink" href="#i-opened-and-closed-a-lot-of-windows-tabs-and-top-shows-kitty-s-memory-usage-is-very-high" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">top</span></code> is not a good way to measure process memory usage. That is because on
modern systems, when allocating memory to a process, the C library functions
will typically allocate memory in large blocks, and give the process chunks of
these blocks. When the process frees a chunk, the C library will not
necessarily release the underlying block back to the OS. So even though the
application has released the memory, <code class="docutils literal notranslate"><span class="pre">top</span></code> will still claim the process is
using it.</p>
<p>To check for memory leaks, instead use a tool like <code class="docutils literal notranslate"><span class="pre">valgrind</span></code>. Run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">PYTHONMALLOC</span><span class="o">=</span>malloc valgrind --tool<span class="o">=</span>massif kitty
</pre></div>
</div>
<p>Now open lots of tabs/windows, generate lots of output using tools like find/yes
etc. Then close all but one window. Do some random work for a few seconds in
that window, maybe run yes or find again. Then quit kitty and run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>massif-visualizer massif.out.*
</pre></div>
</div>
<p>You will see the allocations graph goes up when you opened the windows, then
goes back down when you closed them, indicating there were no memory leaks.</p>
<p>For those interested, you can get a similar profile out of <code class="docutils literal notranslate"><span class="pre">valgrind</span></code> as you get
with <code class="docutils literal notranslate"><span class="pre">top</span></code> by adding <code class="docutils literal notranslate"><span class="pre">--pages-as-heap=yes</span></code> then you will see that memory
allocated in malloc is not freed in free. This can be further refined if you
use <cite>glibc`</cite> as your C library by setting the environment variable
<code class="docutils literal notranslate"><span class="pre">MALLOC_MMAP_THRESHOLD_=64</span></code>. This will cause free to actually free memory
allocated in sizes of more than 64 bytes. With this set, memory usage will
climb high, then fall when closing windows, but not fall all the way back. The
remaining used memory can be investigated using valgrind again, and it will
come from arenas in the GPU drivers and the per thread arenas glibc’s malloc
maintains. These too allocate memory in large blocks and dont release it back
to the OS immediately.</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../support/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Support kitty development</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../marks/">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Mark text on screen</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Kovid Goyal
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#some-special-symbols-are-rendered-small-truncated-in-kitty">Some special symbols are rendered small/truncated in kitty?</a></li>
<li><a class="reference internal" href="#using-a-color-theme-with-a-background-color-does-not-work-well-in-vim">Using a color theme with a background color does not work well in vim?</a></li>
<li><a class="reference internal" href="#i-get-errors-about-the-terminal-being-unknown-or-opening-the-terminal-failing-when-sshing-into-a-different-computer">I get errors about the terminal being unknown or opening the terminal failing when SSHing into a different computer?</a></li>
<li><a class="reference internal" href="#keys-such-as-arrow-keys-backspace-delete-home-end-etc-do-not-work-when-using-su-or-sudo">Keys such as arrow keys, backspace, delete, home/end, etc. do not work when using su or sudo?</a></li>
<li><a class="reference internal" href="#how-do-i-change-the-colors-in-a-running-kitty-instance">How do I change the colors in a running kitty instance?</a></li>
<li><a class="reference internal" href="#how-do-i-specify-command-line-options-for-kitty-on-macos">How do I specify command line options for kitty on macOS?</a></li>
<li><a class="reference internal" href="#i-catted-a-binary-file-and-now-kitty-is-hung">I catted a binary file and now kitty is hung?</a></li>
<li><a class="reference internal" href="#kitty-is-not-able-to-use-my-favorite-font">kitty is not able to use my favorite font?</a></li>
<li><a class="reference internal" href="#how-can-i-assign-a-single-global-shortcut-to-bring-up-the-kitty-terminal">How can I assign a single global shortcut to bring up the kitty terminal?</a></li>
<li><a class="reference internal" href="#how-do-i-map-key-presses-in-kitty-to-different-keys-in-the-terminal-program">How do I map key presses in kitty to different keys in the terminal program?</a></li>
<li><a class="reference internal" href="#how-do-i-open-a-new-window-or-tab-with-the-same-working-directory-as-the-current-window">How do I open a new window or tab with the same working directory as the current window?</a></li>
<li><a class="reference internal" href="#things-behave-differently-when-running-kitty-from-system-launcher-vs-from-another-terminal">Things behave differently when running kitty from system launcher vs. from another terminal?</a></li>
<li><a class="reference internal" href="#i-am-using-tmux-and-have-a-problem">I am using tmux and have a problem</a></li>
<li><a class="reference internal" href="#i-opened-and-closed-a-lot-of-windows-tabs-and-top-shows-kitty-s-memory-usage-is-very-high">I opened and closed a lot of windows/tabs and top shows kitty’s memory usage is very high?</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>