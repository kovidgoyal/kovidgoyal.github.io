<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="Working with the screen and history buffer contents" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sw.kovidgoyal.net/kitty/pipe.html" />
  <meta property="og:description" content="You can pipe the contents of the current screen and history buffer as STDIN to an arbitrary program using the pipe function. The program can be displayed in a kitty window or overlay. For example, ..." />
  <link rel="index" title="Index" href="../genindex/" /><link rel="search" title="Search" href="../search/" />

    <link rel="shortcut icon" href="../_static/kitty.svg"/><meta name="generator" content="sphinx-4.0.3, furo 2021.07.05.beta38"/>
        <title>Working with the screen and history buffer contents - kitty</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css" />
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
  
      <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20736318-2']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../"><div class="brand">kitty</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/kitty.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search/">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../quickstart/">Quickstart</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../binary/">Install kitty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build/">Build from source</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/">Overview</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../conf/">Configure kitty</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../actions/">Mappable actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layouts/">Arrange windows</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../kittens_intro/">Extend kitty</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../kittens/icat/">icat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/diff/">kitty-diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/unicode-input/">Unicode input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hints/">Hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/remote_file/">Remote files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hyperlinked_grep/">Hyperlinked grep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/custom/">Custom kittens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/broadcast/">broadcast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/clipboard/">clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/panel/">Draw a GPU accelerated dock panel on your desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/query_terminal/">Query terminal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../remote-control/">Control kitty from scripts</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../rc_protocol/">The kitty remote control protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../launch/">Launching new tabs/windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../open_actions/">Scripting the mouse click</a></li>
<li class="toctree-l2"><a class="reference internal" href="../marks/">Mark text on screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/">Support kitty development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/">Integrations with other tools</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocol-extensions/">Terminal protocol extensions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../underlines/">Colored and styled underlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics-protocol/">The terminal graphics protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keyboard-protocol/">Comprehensive keyboard handling in terminals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../desktop-notifications/">Desktop notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unscroll/">Unscrolling the screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clipboard/">Pasting to clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color-stack/">Saving and restoring colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deccara/">Setting text styles/colors in arbitrary regions of the screen</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="working-with-the-screen-and-history-buffer-contents">
<h1>Working with the screen and history buffer contents<a class="headerlink" href="#working-with-the-screen-and-history-buffer-contents" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The pipe action has been deprecated in favor of the
<a class="reference internal" href="../launch/"><span class="doc">launch</span></a> action which is more powerful.</p>
</div>
<p>You can pipe the contents of the current screen and history buffer as
<code class="file docutils literal notranslate"><span class="pre">STDIN</span></code> to an arbitrary program using the <code class="docutils literal notranslate"><span class="pre">pipe</span></code> function. The program
can be displayed in a kitty window or overlay.</p>
<p>For example, the following in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code> will open the scrollback
buffer in less in an overlay window, when you press <kbd class="kbd docutils literal notranslate">F1</kbd>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">pipe</span> <span class="nd">@ansi</span> <span class="n">overlay</span> <span class="n">less</span> <span class="o">+</span><span class="n">G</span> <span class="o">-</span><span class="n">R</span>
</pre></div>
</div>
<p>The syntax of the <code class="docutils literal notranslate"><span class="pre">pipe</span></code> function is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pipe</span> <span class="o">&lt;</span><span class="nb">input</span> <span class="n">placeholder</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">destination</span> <span class="n">window</span> <span class="nb">type</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">command</span> <span class="n">line</span> <span class="n">to</span> <span class="n">run</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="the-piping-environment">
<h2>The piping environment<a class="headerlink" href="#the-piping-environment" title="Permalink to this headline">¶</a></h2>
<p>The program to which the data is piped has a special environment variable
declared, <code class="docutils literal notranslate"><span class="pre">KITTY_PIPE_DATA</span></code> whose contents are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KITTY_PIPE_DATA</span><span class="o">=</span><span class="p">{</span><span class="n">scrolled_by</span><span class="p">}:{</span><span class="n">cursor_x</span><span class="p">},{</span><span class="n">cursor_y</span><span class="p">}:{</span><span class="n">lines</span><span class="p">},{</span><span class="n">columns</span><span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">scrolled_by</span></code> is the number of lines kitty is currently scrolled by,
<code class="docutils literal notranslate"><span class="pre">cursor_(x|y)</span></code> is the position of the cursor on the screen with <code class="docutils literal notranslate"><span class="pre">(1,1)</span></code>
being the top left corner and <code class="docutils literal notranslate"><span class="pre">{lines},{columns}</span></code> being the number of rows
and columns of the screen.</p>
<p>You can choose where to run the pipe program:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">overlay</span></code></dt><dd><p>An overlay window over the current kitty window</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">window</span></code></dt><dd><p>A new kitty window</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">os_window</span></code></dt><dd><p>A new top-level window</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tab</span></code></dt><dd><p>A new window in a new tab</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clipboard,</span> <span class="pre">primary</span></code></dt><dd><p>Copy the text directly to the clipboard. In this case the specified program
is not run, so use some dummy program name for it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>Run it in the background</p>
</dd>
</dl>
</div>
<div class="section" id="input-placeholders">
<h2>Input placeholders<a class="headerlink" href="#input-placeholders" title="Permalink to this headline">¶</a></h2>
<p>There are various different kinds of placeholders</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">@selection</span></code></dt><dd><p>Plain text, currently selected text</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@text</span></code></dt><dd><p>Plain text, current screen + scrollback buffer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@ansi</span></code></dt><dd><p>Text with formatting, current screen + scrollback buffer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@screen</span></code></dt><dd><p>Plain text, only current screen</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@ansi_screen</span></code></dt><dd><p>Text with formatting, only current screen</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@alternate</span></code></dt><dd><p>Plain text, secondary screen. The secondary screen is the screen not currently displayed. For
example if you run a fullscreen terminal application, the secondary screen will
be the screen you return to when quitting the application.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@ansi_alternate</span></code></dt><dd><p>Text with formatting, secondary screen.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@alternate_scrollback</span></code></dt><dd><p>Plain text, secondary screen + scrollback, if any.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">@ansi_alternate_scrollback</span></code></dt><dd><p>Text with formatting, secondary screen + scrollback, if any.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>No input</p>
</dd>
</dl>
<p>You can also add the suffix <code class="docutils literal notranslate"><span class="pre">_wrap</span></code> to the placeholder, in which case kitty
will insert the carriage return at every line wrap location (where long lines
are wrapped at screen edges). This is useful if you want to pipe to program
that wants to duplicate the screen layout of the screen.</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Kovid Goyal
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Working with the screen and history buffer contents</a><ul>
<li><a class="reference internal" href="#the-piping-environment">The piping environment</a></li>
<li><a class="reference internal" href="#input-placeholders">Input placeholders</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>