<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="Mark text on screen" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sw.kovidgoyal.net/kitty/marks.html" />
  <meta property="og:description" content="kitty has the ability to mark text on the screen based on regular expressions. This can be useful to highlight words or phrases when browsing output from long running programs or similar. Lets star..." />
  <link rel="index" title="Index" href="../genindex/" /><link rel="search" title="Search" href="../search/" /><link rel="next" title="Frequently Asked Questions" href="../faq/" /><link rel="prev" title="Scripting the mouse click" href="../open_actions/" />

    <link rel="shortcut icon" href="../_static/kitty.svg"/><meta name="generator" content="sphinx-4.0.3, furo 2021.07.05.beta38"/>
        <title>Mark text on screen - kitty</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css" />
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
  
      <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20736318-2']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../"><div class="brand">kitty</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/kitty.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search/">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../quickstart/">Quickstart</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../binary/">Install kitty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build/">Build from source</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../overview/">Overview</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../conf/">Configure kitty</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../actions/">Mappable actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layouts/">Arrange windows</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../kittens_intro/">Extend kitty</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../kittens/icat/">icat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/diff/">kitty-diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/unicode-input/">Unicode input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hints/">Hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/remote_file/">Remote files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/hyperlinked_grep/">Hyperlinked grep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/custom/">Custom kittens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/broadcast/">broadcast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/clipboard/">clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/panel/">Draw a GPU accelerated dock panel on your desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kittens/query_terminal/">Query terminal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../remote-control/">Control kitty from scripts</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../rc_protocol/">The kitty remote control protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../launch/">Launching new tabs/windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../open_actions/">Scripting the mouse click</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Mark text on screen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/">Support kitty development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/">Integrations with other tools</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocol-extensions/">Terminal protocol extensions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../underlines/">Colored and styled underlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics-protocol/">The terminal graphics protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keyboard-protocol/">Comprehensive keyboard handling in terminals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../desktop-notifications/">Desktop notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unscroll/">Unscrolling the screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clipboard/">Pasting to clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color-stack/">Saving and restoring colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deccara/">Setting text styles/colors in arbitrary regions of the screen</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="mark-text-on-screen">
<h1>Mark text on screen<a class="headerlink" href="#mark-text-on-screen" title="Permalink to this headline">¶</a></h1>
<p>kitty has the ability to mark text on the screen based on regular expressions.
This can be useful to highlight words or phrases when browsing output from long
running programs or similar. Lets start with a few examples:</p>
<p>Suppose we want to be able to highlight the word ERROR in the current window.
Add the following to <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">text</span> <span class="mi">1</span> <span class="n">ERROR</span>
</pre></div>
</div>
<p>Now when you press <kbd class="kbd docutils literal notranslate">F1</kbd> all instances of the word <code class="code docutils literal notranslate"><span class="pre">ERROR</span></code> will be
highlighted. To turn off the highlighting, press <kbd class="kbd docutils literal notranslate">F1</kbd> again.
If you want to make it case-insensitive, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">itext</span> <span class="mi">1</span> <span class="n">ERROR</span>
</pre></div>
</div>
<p>To make it match only complete words, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">regex</span> <span class="mi">1</span> \\<span class="n">bERROR</span>\\<span class="n">b</span>
</pre></div>
</div>
<p>Suppose you want to highlight both <code class="code docutils literal notranslate"><span class="pre">ERROR</span></code> and <code class="code docutils literal notranslate"><span class="pre">WARNING</span></code>, case
insensitively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">iregex</span> <span class="mi">1</span> \\<span class="n">bERROR</span>\\<span class="n">b</span> <span class="mi">2</span> \\<span class="n">bWARNING</span>\\<span class="n">b</span>
</pre></div>
</div>
<p>kitty supports up to 3 mark groups (the numbers in the commands above). You
can control the colors used for these groups in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mark1_foreground</span> <span class="n">red</span>
<span class="n">mark1_background</span> <span class="n">gray</span>
<span class="n">mark2_foreground</span> <span class="n">green</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For performance reasons, matching is done per line only, and only when that line is
altered in any way. So you cannot match text that stretches across multiple
lines.</p>
</div>
<div class="section" id="creating-markers-dynamically">
<h2>Creating markers dynamically<a class="headerlink" href="#creating-markers-dynamically" title="Permalink to this headline">¶</a></h2>
<p>If you want to create markers dynamically rather than pre-defining them in
<code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code> you can do so as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">create_marker</span>
<span class="nb">map</span> <span class="n">f2</span> <span class="n">remove_marker</span>
</pre></div>
</div>
<p>Then pressing <kbd class="kbd docutils literal notranslate">F1</kbd> will allow you to enter the marker definition and set
it and pressing <kbd class="kbd docutils literal notranslate">F2</kbd> will remove the marker. <code class="docutils literal notranslate"><span class="pre">create_marker</span></code> accepts
the same syntax as <code class="docutils literal notranslate"><span class="pre">toggle_marker</span></code> above. Note that while creating
markers, the prompt has history so you can easily re-use previous marker
expressions.</p>
<p>You can also use the facilities for <a class="reference internal" href="../remote-control/"><span class="doc">Control kitty from scripts</span></a> to dynamically
add/remove markers.</p>
</div>
<div class="section" id="scrolling-to-marks">
<h2>Scrolling to marks<a class="headerlink" href="#scrolling-to-marks" title="Permalink to this headline">¶</a></h2>
<p>kitty has an action to scroll to the next line that contains a mark. You can
use it by mapping it to some shortcut in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">ctrl</span><span class="o">+</span><span class="n">p</span> <span class="n">scroll_to_mark</span> <span class="n">prev</span>
<span class="nb">map</span> <span class="n">ctrl</span><span class="o">+</span><span class="n">n</span> <span class="n">scroll_to_mark</span> <span class="nb">next</span>
</pre></div>
</div>
<p>Then pressing <kbd class="kbd docutils literal notranslate">ctrl+p</kbd> will scroll to the first line in the scrollback
buffer above the current top line that contains a mark. Pressing <kbd class="kbd docutils literal notranslate">ctrl+n</kbd>
will scroll to show the first line below the current last line that contains
a mark. If you wish to jump to a mark of a specific type, you can add that to
the mapping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">ctrl</span><span class="o">+</span><span class="mi">1</span> <span class="n">scroll_to_mark</span> <span class="n">prev</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Which will scroll only to marks of type 1.</p>
</div>
<div class="section" id="the-full-syntax-for-creating-marks">
<h2>The full syntax for creating marks<a class="headerlink" href="#the-full-syntax-for-creating-marks" title="Permalink to this headline">¶</a></h2>
<p>The syntax of the <code class="code docutils literal notranslate"><span class="pre">toggle_marker</span></code> command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">toggle_marker</span> <span class="o">&lt;</span><span class="n">marker</span><span class="o">-</span><span class="nb">type</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">specification</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here <code class="code docutils literal notranslate"><span class="pre">marker-type</span></code> is one of:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">text</span></code> - simple substring matching</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">itext</span></code> - case-insensitive substring matching</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">regex</span></code> - A python regular expression</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">iregex</span></code> - A case-insensitive python regular expression</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">function</span></code> - An arbitrary function defined in a python file, see <a class="reference internal" href="#marker-funcs"><span class="std std-ref">Arbitrary marker functions</span></a>.</p></li>
</ul>
</div>
<div class="section" id="arbitrary-marker-functions">
<span id="marker-funcs"></span><h2>Arbitrary marker functions<a class="headerlink" href="#arbitrary-marker-functions" title="Permalink to this headline">¶</a></h2>
<p>You can create your own marker functions. Create a python file named
<code class="file docutils literal notranslate"><span class="pre">mymarker.py</span></code> and in it create a <code class="code docutils literal notranslate"><span class="pre">marker</span></code> function. This
function receives the text of the line as input and must yield three numbers,
the starting character position, the ending character position and the mark
group (1-3). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">marker</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="c1"># Function to highlight the letter X</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Save this file somewhere and in <code class="file docutils literal notranslate"><span class="pre">kitty.conf</span></code>, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">function</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">mymarker</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you save the file in the kitty config directory, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">f1</span> <span class="n">toggle_marker</span> <span class="n">function</span> <span class="n">mymarker</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../faq/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Frequently Asked Questions</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../open_actions/">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Scripting the mouse click</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Kovid Goyal
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Mark text on screen</a><ul>
<li><a class="reference internal" href="#creating-markers-dynamically">Creating markers dynamically</a></li>
<li><a class="reference internal" href="#scrolling-to-marks">Scrolling to marks</a></li>
<li><a class="reference internal" href="#the-full-syntax-for-creating-marks">The full syntax for creating marks</a></li>
<li><a class="reference internal" href="#arbitrary-marker-functions">Arbitrary marker functions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    </body>
</html>